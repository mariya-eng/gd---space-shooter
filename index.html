<!DOCTYPE html>
<html>
<head>
  <title>Space Shooter Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: black;
    }
    canvas {
      display: block;
      margin: 0 auto;
      border: 2px solid #ffffff;
      background-color: #000011;
    }
    #hud {
      position: absolute;
      color: white;
      font-family: sans-serif;
      top: 10px;
      left: 10px;
    }
  </style>
</head>
<body>
  <div id="hud">
    <div>Score: <span id="score">0</span></div>
    <div>Lives: <span id="lives">3</span></div>
  </div>
  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let spaceship = {
      x: canvas.width / 2 - 25,
      y: canvas.height - 60,
      width: 50,
      height: 50,
      speed: 5,
      bullets: []
    };

    let keys = {};
    let enemies = [];
    let score = 0;
    let lives = 3;

    document.addEventListener('keydown', e => keys[e.key] = true);
    document.addEventListener('keyup', e => keys[e.key] = false);

    function drawSpaceship() {
      ctx.fillStyle = 'cyan';
      ctx.fillRect(spaceship.x, spaceship.y, spaceship.width, spaceship.height);
    }

    function moveSpaceship() {
      if (keys['ArrowLeft'] && spaceship.x > 0) {
        spaceship.x -= spaceship.speed;
      }
      if (keys['ArrowRight'] && spaceship.x < canvas.width - spaceship.width) {
        spaceship.x += spaceship.speed;
      }
      if (keys[' '] || keys['Spacebar']) {
        fireBullet();
      }
    }

    function fireBullet() {
      if (spaceship.bullets.length === 0 || Date.now() - spaceship.bullets[spaceship.bullets.length - 1].time > 300) {
        spaceship.bullets.push({ x: spaceship.x + 20, y: spaceship.y, time: Date.now() });
      }
    }

    function drawBullets() {
      ctx.fillStyle = 'yellow';
      spaceship.bullets.forEach(bullet => {
        bullet.y -= 8;
        ctx.fillRect(bullet.x, bullet.y, 5, 10);
      });
      spaceship.bullets = spaceship.bullets.filter(b => b.y > 0);
    }

    function spawnEnemy() {
      if (Math.random() < 0.03) {
        enemies.push({
          x: Math.random() * (canvas.width - 40),
          y: -40,
          width: 40,
          height: 40,
          speed: 2 + Math.random() * 2
        });
      }
    }

    function drawEnemies() {
      ctx.fillStyle = 'red';
      enemies.forEach(enemy => {
        enemy.y += enemy.speed;
        ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
      });
      enemies = enemies.filter(enemy => enemy.y < canvas.height);
    }

    function checkCollisions() {
      enemies.forEach((enemy, ei) => {
        spaceship.bullets.forEach((bullet, bi) => {
          if (bullet.x < enemy.x + enemy.width &&
              bullet.x + 5 > enemy.x &&
              bullet.y < enemy.y + enemy.height &&
              bullet.y + 10 > enemy.y) {
            enemies.splice(ei, 1);
            spaceship.bullets.splice(bi, 1);
            score += 10;
            document.getElementById('score').textContent = score;
          }
        });

        if (enemy.x < spaceship.x + spaceship.width &&
            enemy.x + enemy.width > spaceship.x &&
            enemy.y < spaceship.y + spaceship.height &&
            enemy.y + enemy.height > spaceship.y) {
          enemies.splice(ei, 1);
          lives--;
          document.getElementById('lives').textContent = lives;
          if (lives <= 0) {
            alert('Game Over! Final Score: ' + score);
            location.reload();
          }
        }
      });
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      moveSpaceship();
      drawSpaceship();
      fireBullet();
      drawBullets();
      spawnEnemy();
      drawEnemies();
      checkCollisions();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
